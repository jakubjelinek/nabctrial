\newfontface\GreGall{gregall.ttf}
\newfontface\GreGallModern{SGModern.ttf}
\directlua{dofile('gregall.lua')}
\newcommand{\gregallcharno}[3]{{\directlua{
  tex.sprint(gregallparse_neumes("\luaescapestring{#1}", "\luaescapestring{#2}", \luaescapestring{#3}))
}}}
\def\gregallchar{%
  \begingroup %
    \catcode`\~=12{}%
    \fontsize{8}{8}%
    \color{red}%
    \dogregallchar%
}
\def\dogregallchar#1{
    \gregallcharno{#1}{gregall}{0.8}%
  \endgroup %
}
\def\gregallmodchar{%
  \begingroup %
    \catcode`\~=12{}%
    \fontsize{16}{16}%
    \color{red}%
    \dogregallmodchar%
}
\def\dogregallmodchar#1{
    \gregallcharno{#1}{gregallmod}{1.6}%
  \endgroup %
}
